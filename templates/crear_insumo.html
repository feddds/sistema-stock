{% extends "base.html" %}

{% block content %}
<h2>Crear Nuevo Insumo</h2>

<form method="POST">
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="denominacion" class="form-label">Denominación *</label>
                <input type="text" class="form-control" id="denominacion" name="denominacion" 
                       placeholder="Ej: superassilex" required>
            </div>
            
            <div class="mb-3">
                <label for="tipo" class="form-label">Tipo *</label>
                <input type="text" class="form-control" id="tipo" name="tipo" 
                       placeholder="Ej: peach, max film, etc." required>
            </div>
            
            <div class="mb-3">
                <label for="modelo" class="form-label">Modelo *</label>
                <input type="text" class="form-control" id="modelo" name="modelo" 
                       placeholder="Ej: k1500, p600, etc." required>
            </div>
            
            <div class="mb-3">
                <label for="codigo_barras" class="form-label">Código de Barras</label>
                <input type="text" class="form-control" id="codigo_barras" name="codigo_barras">
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="mb-3">
                <label for="cantidad_por_caja" class="form-label">Cantidad por Caja *</label>
                <input type="number" class="form-control" id="cantidad_por_caja" 
                       name="cantidad_por_caja" value="1" min="1" required>
            </div>
            
            <div class="mb-3">
                <label for="precio_caja" class="form-label">Precio por Caja ($) *</label>
                <input type="number" step="0.01" class="form-control" id="precio_caja" 
                       name="precio_caja" required>
            </div>
            
            <div class="mb-3">
                <label for="precio_unitario" class="form-label">Precio Unitario ($)</label>
                <input type="number" step="0.01" class="form-control" id="precio_unitario" 
                       name="precio_unitario" readonly>
                <div class="form-text">Calculado automáticamente</div>
            </div>
        </div>
    </div>
    
    <button type="submit" class="btn btn-primary">Crear Insumo</button>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancelar</a>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const precioCaja = document.getElementById('precio_caja');
    const cantidadPorCaja = document.getElementById('cantidad_por_caja');
    const precioUnitario = document.getElementById('precio_unitario');
    
    function calcularPrecioUnitario() {
        const precio = parseFloat(precioCaja.value) || 0;
        const cantidad = parseFloat(cantidadPorCaja.value) || 1;
        
        if (precio > 0 && cantidad > 0) {
            precioUnitario.value = (precio / cantidad).toFixed(2);
        } else {
            precioUnitario.value = '';
        }
    }
    
    precioCaja.addEventListener('input', calcularPrecioUnitario);
    cantidadPorCaja.addEventListener('input', calcularPrecioUnitario);
});
</script>
{% endblock %}